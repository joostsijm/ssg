<!DOCTYPE html>
<html>
<head>
    <title>Edit: {{ page.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
	{% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
	{% for category, message in messages %}
	<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
		{{ message }}
		<button type="button" class="close" data-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	{% endfor %}
	{% endif %}
	{% endwith %}
	<ul>
		{%- for item in current_menu.children recursive -%}
		<li class="nav-item" data-toggle="tooltip" data-placement="right" title="{{ item.text }}">
		    <a class="nav-link" href="{{ item.url}}">
		        <span class="nav-link-text">{{ item.text }}</span>
		    </a>
		</li>
		{%- endfor -%}
	</ul>
	<h1>Edit: {{ page.title }}</h1>
	<form method="post">
		<div class="form-group">
			<label class="text-normal text-dark">title</label>
			<input type="text" class="form-control" name="title" placeholder="title" value="{{ page.title }}">
		</div>
		<div class="form-group">
			<label class="text-normal text-dark">Source</label>
			<textarea class="form-control" name="source">{{ page.source }}</textarea>
		</div>
		<div class="form-group">
			<label class="text-normal text-dark">Parent</label>
			<select class="form-control" name="parent_id">
				<option></option>
				{% for parent_page in pages %}
				{% if parent_page.id == page.parent_id %}
				<option value="{{ parent_page.id }}" selected>{{ parent_page.title }}</option>
				{% else %}
				<option value="{{ parent_page.id }}">{{ parent_page.title }}</option>
				{% endif %}
				{% endfor %}
			</select>
		</div>
		<div class="form-group pull-right">
			<button class="btn btn-primary">Save</button>
		</div>
	</form>
	<p>{{ page.content() }}</p>
</body>
